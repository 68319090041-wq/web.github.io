<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy Academy - Recruitment</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Kanit:wght@200;400&display=swap" rel="stylesheet">
    <style>
        :root { --primary-glow: #7b2ff7; --secondary-glow: #00d4ff; }
        body { margin: 0; padding: 0; font-family: 'Kanit', sans-serif; background: #02010a; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; color: white; }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%); }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.5; animation: twinkle var(--duration) infinite ease-in-out; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }

        .galaxy-card { background: rgba(15, 15, 35, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); padding: 40px; border-radius: 24px; width: 90%; max-width: 400px; box-shadow: 0 0 50px rgba(123, 47, 247, 0.2); text-align: center; }
        h2 { font-family: 'Orbitron', sans-serif; letter-spacing: 3px; background: linear-gradient(to right, #fff, var(--secondary-glow)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 30px; }
        
        .input-group { margin-bottom: 20px; text-align: left; }
        label { font-size: 11px; text-transform: uppercase; color: var(--secondary-glow); letter-spacing: 1px; display: block; margin-bottom: 5px; }
        input { width: 100%; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); padding: 12px; border-radius: 8px; color: white; box-sizing: border-box; outline: none; transition: 0.3s; font-family: 'Kanit'; }
        input:focus { border-color: var(--secondary-glow); box-shadow: 0 0 10px rgba(0, 212, 255, 0.3); }

        .btn-launch { width: 100%; padding: 15px; background: linear-gradient(45deg, var(--primary-glow), #4e148c); border: none; border-radius: 50px; color: white; font-family: 'Orbitron', sans-serif; cursor: pointer; text-transform: uppercase; letter-spacing: 2px; transition: 0.4s; }
        .btn-launch:hover { transform: scale(1.05); box-shadow: 0 0 30px var(--primary-glow); }
        #loading { display: none; margin-top: 15px; font-size: 12px; color: var(--secondary-glow); font-family: 'Orbitron'; }

        .admin-fab { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: rgba(15,15,35,0.8); border: 2px solid var(--secondary-glow); border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-decoration: none; color: white; backdrop-filter: blur(10px); transition: 0.3s; z-index: 100; }
        .admin-fab:hover { width: 140px; border-radius: 30px; background: var(--primary-glow); }
        .fab-text { font-family: 'Orbitron'; font-size: 10px; display: none; }
        .admin-fab:hover .fab-text { display: block; }
    </style>
</head>
<body>
    <div class="stars" id="starField"></div>
    <div class="galaxy-card">
        <h2>RECRUITMENT</h2>
        <form id="regForm">
            <div class="input-group">
                <label>Pilot Name</label>
                <input type="text" id="pName" placeholder="ใส่ชื่อจริง-นามสกุล" required>
            </div>
            <div class="input-group">
                <label>Space Email</label>
                <input type="email" id="pEmail" placeholder="pilot@galaxy.com" required>
            </div>
            <div class="input-group">
                <label>Signal Number</label>
                <input type="tel" id="pPhone" placeholder="08XXXXXXXX" required>
            </div>
            <button type="submit" class="btn-launch">Warp to Class</button>
            <div id="loading">INITIATING HYPERDRIVE...</div>
        </form>
    </div>

    <a href="admin.html" class="admin-fab"><span>⚙️</span><span class="fab-text">ADMIN</span></a>

    <script>
        const field = document.getElementById('starField');
        for(let i=0; i<100; i++) {
            let s = document.createElement('div');
            s.className = 'star';
            s.style.left = Math.random()*100+'%'; s.style.top = Math.random()*100+'%';
            s.style.width = s.style.height = Math.random()*3+'px';
            s.style.setProperty('--duration', Math.random()*3+2+'s');
            field.appendChild(s);
        }

        document.getElementById('regForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const pilotData = {
                name: document.getElementById('pName').value,
                email: document.getElementById('pEmail').value,
                phone: document.getElementById('pPhone').value,
                date: new Date().toLocaleString('th-TH')
            };
          // 1. ลบของเก่าออก แล้วใส่โค้ดส่งข้อมูลไป SheetDB แทน
        fetch('https://sheetdb.io/api/v1/qqsxwm0mfpus', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                "name": pilotData.name,
                "email": pilotData.email,
                "phone": pilotData.phone,
                "date": pilotData.date
            })
        })
        .then(response => {
            // 2. เมื่อบันทึกสำเร็จ ค่อยย้ายหน้า
            document.querySelector('.btn-launch').style.display = 'none';
            document.getElementById('loading').style.display = 'block';
            setTimeout(() => { window.location.href = 'course.html'; }, 1500);
        });

            document.querySelector('.btn-launch').style.display = 'none';
            document.getElementById('loading').style.display = 'block';
            setTimeout(() => { window.location.href = 'course.html'; }, 1500);
        });
    </script>
</body>
</html>